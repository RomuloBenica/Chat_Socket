{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\romulo\\\\Documents\\\\programac\\xE3o\\\\socket_chat\\\\Chat_Socket\\\\socketIoTest\\\\cliente\\\\src\\\\Chat.js\";\nimport React, { useEffect, useState } from 'react';\nimport io from \"socket.io-client\";\nimport uuid from \"uuid/dist/v4\";\nconst myId = uuid();\nconst socket = io('http://localhost:3002');\nsocket.on('connect', () => console.log('[IO] Connect => New connection'));\n\nfunction Chat() {\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  useEffect(() => {\n    const handleNewMessage = newMessage => {\n      setMessages([...messages, newMessage]);\n    };\n\n    socket.on('chat.message', handleNewMessage);\n    return () => socket.off('chat.message', handleNewMessage);\n  }, [messages]);\n\n  const handleInputChange = event => {\n    setMessage(event.target.value);\n  };\n\n  const handleFormSubmit = event => {\n    event.preventDefault(); //\"para nao recarregar a pagina\"\n\n    if (message.trim()) {\n      //limpar campo do  input \"no if vazio == falso\"\n      socket.emit('chat.message', {\n        id: myId,\n        message: message\n      });\n      console.log(\"console menssages\" + messages);\n      setMessage('');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, messages.map((m, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    className: `list__item list__item--${m.id === myId ? 'mine' : 'other'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: `message message--${m.id === myId ? 'mine' : 'other'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, m.message)))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form__field\",\n    placeholder: \"type a new message here\",\n    type: \"text\",\n    value: message,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default Chat;","map":{"version":3,"sources":["C:/Users/romulo/Documents/programacÃ£o/socket_chat/Chat_Socket/socketIoTest/cliente/src/Chat.js"],"names":["React","useEffect","useState","io","uuid","myId","socket","on","console","log","Chat","message","setMessage","messages","setMessages","handleNewMessage","newMessage","off","handleInputChange","event","target","value","handleFormSubmit","preventDefault","trim","emit","id","map","m","index"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAOC,IAAP,MAAiB,cAAjB;AAEA,MAAMC,IAAI,GAAGD,IAAI,EAAjB;AACA,MAAME,MAAM,GAAGH,EAAE,CAAC,uBAAD,CAAjB;AACAG,MAAM,CAACC,EAAP,CAAU,SAAV,EAAqB,MAAMC,OAAO,CAACC,GAAR,CAAY,gCAAZ,CAA3B;;AAEA,SAASC,IAAT,GAAgB;AAEd,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAyBV,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAM,CAACW,QAAD,EAAWC,WAAX,IAA2BZ,QAAQ,CAAC,EAAD,CAAzC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,gBAAgB,GAAGC,UAAU,IAAI;AACrCF,MAAAA,WAAW,CAAC,CAAE,GAAGD,QAAL,EAAeG,UAAf,CAAD,CAAX;AACD,KAFD;;AAGAV,IAAAA,MAAM,CAACC,EAAP,CAAU,cAAV,EAA0BQ,gBAA1B;AACA,WAAO,MAAMT,MAAM,CAACW,GAAP,CAAW,cAAX,EAA2BF,gBAA3B,CAAb;AACD,GANQ,EAMN,CAACF,QAAD,CANM,CAAT;;AAQA,QAAMK,iBAAiB,GAAGC,KAAK,IAAI;AACjCP,IAAAA,UAAU,CAACO,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAV;AACD,GAFD;;AAIA,QAAMC,gBAAgB,GAAGH,KAAK,IAAI;AAChCA,IAAAA,KAAK,CAACI,cAAN,GADgC,CACR;;AACxB,QAAGZ,OAAO,CAACa,IAAR,EAAH,EAAkB;AAAC;AACjBlB,MAAAA,MAAM,CAACmB,IAAP,CAAY,cAAZ,EAA4B;AAC1BC,QAAAA,EAAE,EAAErB,IADsB;AAE1BM,QAAAA,OAAO,EAAEA;AAFiB,OAA5B;AAIAH,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAqBI,QAAjC;AACAD,MAAAA,UAAU,CAAC,EAAD,CAAV;AACD;AACF,GAVD;;AAYA,sBACE;AAAM,IAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIC,QAAQ,CAACc,GAAT,CAAa,CAACC,CAAD,EAAIC,KAAJ,kBACb;AAAI,IAAA,GAAG,EAAEA,KAAT;AAAgB,IAAA,SAAS,EAAG,0BAAyBD,CAAC,CAACF,EAAF,KAASrB,IAAT,GAAgB,MAAhB,GAAyB,OAAQ,EAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,SAAS,EAAG,oBAAmBuB,CAAC,CAACF,EAAF,KAASrB,IAAT,GAAgB,MAAhB,GAAyB,OAAQ,EAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEuB,CAAC,CAACjB,OADJ,CADF,CADA,CADJ,CADF,eAUE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,QAAQ,EAAEW,gBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,aADZ;AAEE,IAAA,WAAW,EAAC,yBAFd;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,KAAK,EAAEX,OAJT;AAKE,IAAA,QAAQ,EAAEO,iBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAVF,CADF;AAsBD;;AAED,eAAeR,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport io from \"socket.io-client\";\r\nimport uuid from \"uuid/dist/v4\";\r\n\r\nconst myId = uuid();\r\nconst socket = io('http://localhost:3002');\r\nsocket.on('connect', () => console.log('[IO] Connect => New connection'));\r\n\r\nfunction Chat() {\r\n\r\n  const [message, setMessage ] = useState(''); \r\n  const [messages, setMessages ] = useState([]); \r\n\r\n  useEffect(() => {\r\n    const handleNewMessage = newMessage => {\r\n      setMessages([ ...messages, newMessage]);\r\n    }\r\n    socket.on('chat.message', handleNewMessage);\r\n    return () => socket.off('chat.message', handleNewMessage)\r\n  }, [messages]);\r\n\r\n  const handleInputChange = event => {\r\n    setMessage(event.target.value)\r\n  }\r\n\r\n  const handleFormSubmit = event => {\r\n    event.preventDefault(); //\"para nao recarregar a pagina\"\r\n    if(message.trim()){//limpar campo do  input \"no if vazio == falso\"\r\n      socket.emit('chat.message', {\r\n        id: myId,\r\n        message: message\r\n      })\r\n      console.log(\"console menssages\"+ messages);\r\n      setMessage('');\r\n    }\r\n  }\r\n\r\n  return(\r\n    <main className=\"container\">\r\n      <ul className=\"list\">\r\n        { messages.map((m, index) => (\r\n          <li key={index} className={`list__item list__item--${m.id === myId ? 'mine' : 'other'}`}>\r\n            <span  className={`message message--${m.id === myId ? 'mine' : 'other'}`}>\r\n             {m.message}\r\n            </span>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <form className=\"form\" onSubmit={handleFormSubmit}>\r\n        <input \r\n          className=\"form__field\"\r\n          placeholder=\"type a new message here\"\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={handleInputChange}\r\n        />\r\n      </form>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Chat;"]},"metadata":{},"sourceType":"module"}